<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>–£—á–∏–º –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –±—É–∫–≤—ã!</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        /* –ó–∞–ø—Ä–µ—Ç –Ω–∞ —á—Ç–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ iOS */
        body, body * {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
        }
        
        /* –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è iOS Safari */
        @supports (-webkit-touch-callout: none) {
            * {
                speak: never;
                -webkit-user-select: none !important;
            }
        }

        body {
            font-family: 'Comic Sans MS', 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .game-container {
            background: white;
            border-radius: 30px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 600px;
            width: 100%;
            text-align: center;
        }

        h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .subtitle {
            color: #666;
            font-size: 1.2em;
            margin-bottom: 30px;
        }

        .score-board {
            display: flex;
            justify-content: space-around;
            margin-bottom: 30px;
            font-size: 1.3em;
        }

        .score-item {
            background: #f0f0f0;
            padding: 15px 25px;
            border-radius: 15px;
            font-weight: bold;
        }

        .score-item span {
            color: #667eea;
            font-size: 1.5em;
        }

        .letter-display {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-size: 8em;
            font-weight: bold;
            padding: 50px;
            border-radius: 25px;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: transform 0.3s;
            text-transform: uppercase;
            -webkit-user-select: none;
            user-select: none;
            -webkit-touch-callout: none;
        }
        
        .letter-display::before {
            content: attr(data-letter);
            speak: never;
            -webkit-user-select: none;
        }

        .pronunciation {
            background: #f0f0f0;
            color: #667eea;
            font-size: 1.8em;
            font-weight: bold;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            border: 3px dashed #667eea;
        }

        .pronunciation-label {
            font-size: 0.7em;
            color: #999;
            margin-bottom: 5px;
        }

        .letter-display:hover {
            transform: scale(1.05);
        }

        .letter-display:active {
            transform: scale(0.95);
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 30px 0;
        }

        .option-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 25px;
            font-size: 1.5em;
            font-weight: bold;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            text-transform: uppercase;
        }

        .option-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .option-btn:active {
            transform: translateY(0);
        }

        .option-btn.correct {
            background: #4CAF50;
            animation: correctPulse 0.5s;
        }

        .option-btn.wrong {
            background: #f44336;
            animation: shake 0.5s;
        }

        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }

        .control-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2em;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .control-btn:hover {
            background: #764ba2;
            transform: scale(1.05);
        }

        .message {
            font-size: 1.5em;
            margin: 20px 0;
            min-height: 40px;
            font-weight: bold;
        }

        .message.correct {
            color: #4CAF50;
        }

        .message.wrong {
            color: #f44336;
        }

        .emoji {
            font-size: 2em;
        }

        .progress-bar {
            background: #e0e0e0;
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            background: linear-gradient(90deg, #4CAF50, #8BC34A);
            height: 100%;
            transition: width 0.5s;
            border-radius: 10px;
        }
    </style>
</head>
<body aria-live="off">{
    <div class="game-container">
        <h1>üéÆ –£—á–∏–º –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –±—É–∫–≤—ã!</h1>
        <p class="subtitle">–°–ª—É—à–∞–π –±—É–∫–≤—É –∏ –≤—ã–±–∏—Ä–∞–π –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç</p>
        
        <div class="score-board">
            <div class="score-item">
                ‚≠ê –ü—Ä–∞–≤–∏–ª—å–Ω–æ: <span id="correct-count">0</span>
            </div>
            <div class="score-item">
                ‚ùå –û—à–∏–±–æ–∫: <span id="wrong-count">0</span>
            </div>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progress"></div>
        </div>

        <div class="letter-display" id="letter-display" onclick="speakLetter()" data-letter="?" aria-hidden="true" role="img" aria-label="">
        </div>

        <div class="pronunciation">
            <div class="pronunciation-label">–ü—Ä–æ–∏–∑–Ω–æ—Å–∏—Ç—Å—è:</div>
            <div id="pronunciation-text">[ ? ]</div>
        </div>

        <div class="message" id="message"></div>

        <div class="options-container" id="options-container">
            <!-- Options will be inserted here -->
        </div>

        <div class="controls">
            <button class="control-btn" onclick="speakLetter()">üîä –ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
            <button class="control-btn" onclick="nextQuestion()">‚û°Ô∏è –°–ª–µ–¥—É—é—â–∞—è</button>
        </div>
    </div>

    <script>
        const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
        let currentLetter = '';
        let correctAnswers = 0;
        let wrongAnswers = 0;
        let questionsAsked = 0;
        const totalQuestions = 10;

        // –°–ª–æ–≤–∞—Ä—å –ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏—è –±—É–∫–≤
        const letterPronunciation = {
            'A': '—ç–π',
            'B': '–±–∏',
            'C': '—Å–∏',
            'D': '–¥–∏',
            'E': '–∏',
            'F': '—ç—Ñ',
            'G': '–¥–∂–∏',
            'H': '—ç–π—á',
            'I': '–∞–π',
            'J': '–¥–∂–µ–π',
            'K': '–∫–µ–π',
            'L': '—ç–ª',
            'M': '—ç–º',
            'N': '—ç–Ω',
            'O': '–æ—É',
            'P': '–ø–∏',
            'Q': '–∫—å—é',
            'R': '–∞:',
            'S': '—ç—Å',
            'T': '—Ç–∏',
            'U': '—é',
            'V': '–≤–∏',
            'W': '–¥–∞–±–ª-—é',
            'X': '—ç–∫—Å',
            'Y': '—É–∞–π',
            'Z': '–∑–µ–¥'
        };

        function updatePronunciation() {
            const pronunciationEl = document.getElementById('pronunciation-text');
            if (currentLetter && letterPronunciation[currentLetter]) {
                pronunciationEl.textContent = `[ ${letterPronunciation[currentLetter]} ]`;
            } else {
                pronunciationEl.textContent = '[ ? ]';
            }
        }

        function getRandomLetter() {
            return alphabet[Math.floor(Math.random() * alphabet.length)];
        }

        function getWrongOptions(correctLetter, count) {
            const options = [];
            while (options.length < count) {
                const letter = getRandomLetter();
                if (letter !== correctLetter && !options.includes(letter)) {
                    options.push(letter);
                }
            }
            return options;
        }

        function shuffle(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function speakLetter() {
            if ('speechSynthesis' in window) {
                // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ª—é–±—É—é —Ç–µ–∫—É—â—É—é –æ–∑–≤—É—á–∫—É
                window.speechSynthesis.cancel();
                
                // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è iOS Safari
                setTimeout(() => {
                    const utterance = new SpeechSynthesisUtterance(currentLetter);
                    utterance.lang = 'en-US';
                    utterance.rate = 0.8;
                    utterance.pitch = 1.2;
                    utterance.volume = 1;
                    
                    // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –æ–∑–≤—É—á–∏–≤–∞–Ω–∏–µ
                    utterance.onstart = function() {
                        document.body.setAttribute('aria-busy', 'true');
                    };
                    utterance.onend = function() {
                        document.body.setAttribute('aria-busy', 'false');
                    };
                    
                    window.speechSynthesis.speak(utterance);
                }, 100);
            }
        }

        function updateScore() {
            document.getElementById('correct-count').textContent = correctAnswers;
            document.getElementById('wrong-count').textContent = wrongAnswers;
            
            const progress = (questionsAsked / totalQuestions) * 100;
            document.getElementById('progress').style.width = progress + '%';
        }

        function showMessage(isCorrect) {
            const messageEl = document.getElementById('message');
            if (isCorrect) {
                const messages = ['–ú–æ–ª–æ–¥–µ—Ü! üéâ', '–û—Ç–ª–∏—á–Ω–æ! üåü', '–ü—Ä–∞–≤–∏–ª—å–Ω–æ! üëç', '–°—É–ø–µ—Ä! üéä', '–£–º–Ω–∏—Ü–∞! üí™'];
                messageEl.textContent = messages[Math.floor(Math.random() * messages.length)];
                messageEl.className = 'message correct';
            } else {
                const messages = ['–ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑! üòä', '–ü–æ—á—Ç–∏ –ø–æ–ª—É—á–∏–ª–æ—Å—å! üí™', '–ù–µ –ø–µ—Ä–µ–∂–∏–≤–∞–π, –ø–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞! üåà'];
                messageEl.textContent = messages[Math.floor(Math.random() * messages.length)];
                messageEl.className = 'message wrong';
            }

            setTimeout(() => {
                messageEl.textContent = '';
                messageEl.className = 'message';
            }, 2000);
        }

        function checkAnswer(selectedLetter, btnElement) {
            const allButtons = document.querySelectorAll('.option-btn');
            allButtons.forEach(btn => btn.disabled = true);

            if (selectedLetter === currentLetter) {
                correctAnswers++;
                btnElement.classList.add('correct');
                showMessage(true);
                
                setTimeout(() => {
                    nextQuestion();
                }, 1500);
            } else {
                wrongAnswers++;
                btnElement.classList.add('wrong');
                showMessage(false);
                
                allButtons.forEach(btn => {
                    if (btn.textContent === currentLetter) {
                        btn.style.background = '#4CAF50';
                        btn.style.transform = 'scale(1.1)';
                    }
                });

                setTimeout(() => {
                    allButtons.forEach(btn => {
                        btn.disabled = false;
                        btn.classList.remove('wrong');
                        btn.style.background = '#4CAF50';
                        btn.style.transform = 'scale(1)';
                    });
                }, 2000);
            }

            updateScore();
        }

        function nextQuestion() {
            if (questionsAsked >= totalQuestions) {
                showFinalScore();
                return;
            }

            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ª—é–±—É—é –æ–∑–≤—É—á–∫—É –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –Ω–æ–≤–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
            }

            questionsAsked++;
            currentLetter = getRandomLetter();
            
            const letterDisplay = document.getElementById('letter-display');
            letterDisplay.setAttribute('data-letter', '?');
            letterDisplay.setAttribute('aria-label', '');
            
            document.getElementById('pronunciation-text').textContent = '[ ? ]';
            
            const wrongOptions = getWrongOptions(currentLetter, 3);
            const allOptions = shuffle([currentLetter, ...wrongOptions]);
            
            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';
            
            allOptions.forEach(letter => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.innerHTML = `${letter} <span style="font-size: 0.6em; opacity: 0.8;">(${letter.toLowerCase()})</span>`;
                btn.setAttribute('aria-label', `–ë—É–∫–≤–∞ ${letter}`);
                btn.setAttribute('role', 'button');
                btn.onclick = function() { checkAnswer(letter, btn); };
                optionsContainer.appendChild(btn);
            });

            setTimeout(() => {
                speakLetter();
                updatePronunciation();
            }, 300);

            updateScore();
        }

        function showFinalScore() {
            const container = document.querySelector('.game-container');
            const percentage = Math.round((correctAnswers / totalQuestions) * 100);
            let emoji = 'üéâ';
            let message = '–û—Ç–ª–∏—á–Ω–æ!';
            
            if (percentage === 100) {
                emoji = 'üèÜ';
                message = '–ò–¥–µ–∞–ª—å–Ω–æ!';
            } else if (percentage >= 80) {
                emoji = 'üåü';
                message = '–°—É–ø–µ—Ä!';
            } else if (percentage >= 60) {
                emoji = 'üëç';
                message = '–•–æ—Ä–æ—à–æ!';
            } else {
                emoji = 'üí™';
                message = '–ü—Ä–æ–¥–æ–ª–∂–∞–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è!';
            }

            container.innerHTML = `
                <h1>${emoji} ${message}</h1>
                <div style="font-size: 3em; margin: 30px 0;">${percentage}%</div>
                <div style="font-size: 1.5em; margin: 20px 0;">
                    <div style="margin: 10px 0;">‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: ${correctAnswers}</div>
                    <div style="margin: 10px 0;">‚ùå –û—à–∏–±–æ–∫: ${wrongAnswers}</div>
                </div>
                <button class="control-btn" onclick="location.reload()" style="margin-top: 30px; font-size: 1.3em;">
                    üîÑ –ò–≥—Ä–∞—Ç—å –µ—â—ë —Ä–∞–∑
                </button>
            `;
        }

        // Start the game
        window.onload = function() {
            nextQuestion();
        };
    </script>
</body>
</html>
